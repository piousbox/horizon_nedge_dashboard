{% extends 'horizon_nedge_dashboard/base.html' %}
{% load i18n %}
{% block title %}{% trans "NexentaEdge Dashboard" %}{% endblock %}

{% block page_header %}
  <div class="nedge-header">
    {% include "horizon/common/_page_header.html" with title=_(" ") %}
  </div>
{% endblock page_header %}

{% block mydashboard_main %}

  <div class="notifications">
    {% for note in notifications %}
    <div class="item">{{ note.message }}</div>
    {% endfor %}
  </div>

  <div class="this-overview">
    <!-- <img class="this-vmworld" src="https://s3.amazonaws.com/ish-archive/2014/Clients/Nexenta/vmworld.png" alt="" width="170px" /> -->
    <img class="this-vmworld" src="https://s3.amazonaws.com/ish-archive/2014/Clients/Nexenta/20150507.edge.png" alt="" width="170px" />
    <h3>Overview:</h3>
    <ul>
      <li><b>Endpoint:</b> {{ nedge_url }}</li>
      <li><b>Status:</b> {{ system_status }}</li>
    </ul>
    <!-- version 0.0.9 from 20150508 -->

    <h3 class="nodes">Nodes</h3>
    <ul>
      <li />{{ n_nodes_good }} Node(s) OK
      <li />{{ n_nodes_degraded }} Node(s) DEGRADED
      <li />{{ n_nodes_bad }} Node(s) FAULTED
    </ul>
  </div>

  <div class="c"></div>

  <div class="nedge-stats">
    <h3>Statistics:</h3>
    <h4 class="hide">Storage Statistics:</h4>
    <div class="storage-statistics">
      Physical Free Capacity: {{ capacity_available }}<br />
      Physical Allocated Capacity: {{ capacity_used }}<br />
      Total Raw Capacity: {{ capacity_total }}<br />
      <br />

      Logical Used Capacity: {{ total_logical_used }}<br />
      Estimated Available Capacity: {{ est_total_available }}<br />
      Number of objects: {{ n_objects }}<br />
      <div class="c"></div>
    </div>
    <div class="righthand-floater reduction-factor">
      <h1>{{ reduction_factor }}</h1>
      Estimated <br />Data Reduction Ratio
    </div>
    <div class="righthand-floater data-reduction">
      <h1>{{ data_reduction }}</h1>
      Estimated <br />Capacity Savings
    </div>
    <div class="righthand-floater estimated-free-space">
      <h1>{{ capacity_available }}</h1>
      Physical <br />Free Capacity
    </div>
    <div class="c"></div>
  </div>

  <h3 class="nedge-table-title" >Node Statistics:</h3>
  <div class="nodes table_wrapper">
    <table id="nedge_nodes" class="table table-bordered table-striped datatable">
      <thead>
        <tr class="table_caption">
          <th class="table_header" colspan="12">
	    <h3 class="table_title">Nodes</h3>
          </th>
        </tr>
        <tr>
          <th class="normal_column">Node name</th>
          <th class="normal_column">Node status</th>
          <th class="normal_column">IPv6</th>
          <!-- <th class="normal_column">Health</th> -->
          <th class="normal_column">Number of objects</th>
          <th class="normal_column">Total Raw Capacity</th>
          <th class="normal_column">Used capacity</th>
          <th class="normal_column">Utilization</th>
        </tr>
      </thead>
      <tbody>
        {% for node in nodes %}
        <tr>
          <td class="normal_column">{{ node.hostname }}</td>
          <td class="normal_column">{{ node.status }}</td>
          <td class="normal_column">{{ node.ipv6addr }}</td>
          <!-- <td class="normal_column">{{ node.health }}</td> -->
          <td class="normal_column">{{ node.num_objects }}</td>
          <td class="normal_column">{{ node.capacity }}</td>
          <td class="normal_column">{{ node.used }}</td>
          <td class="normal_column">{{ node.utilization }}%</td>
        </tr>
        {% endfor %}
      </tbody>
      <tfoot>
        <tr>
          <td colspan="12">&nbsp;</td>
        </tr>
      </tfoot>
    </table>
  </div>
  
{% endblock %}

